# Epic 1 ì§„í–‰ ìƒí™©

## âœ… ì™„ë£Œëœ ìž‘ì—…

### Epic 1.1: S3 Presigned URL ë°œê¸‰ gRPC API êµ¬í˜„
- [x] AWS SDK for Go (v2) ì—°ë™
- [x] `analysis.proto`ì— Presigned URL ìš”ì²­/ì‘ë‹µ ë©”ì‹œì§€ ì •ì˜
- [x] S3 PutObject Presigned URL ìƒì„± ë¡œì§ êµ¬í˜„
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìž‘ì„±

**ë¬¸ì„œ**: `docs/epic-1.1-completion.md`

### Epic 1.2: í”„ë¡ íŠ¸ì—”ë“œ ì§ì ‘ ë¹„ë””ì˜¤ ì—…ë¡œë“œ UI ë° S3 ì—°ë™
- [x] Drag & Drop íŒŒì¼ ì—…ë¡œë“œ UI ì»´í¬ë„ŒíŠ¸ ì¶”ê°€
- [x] gRPC-webì„ í†µí•´ ë°±ì—”ë“œì— Presigned URL ìš”ì²­
- [x] ë°œê¸‰ë°›ì€ URLì„ ì‚¬ìš©í•˜ì—¬ S3ì— íŒŒì¼ ì§ì ‘ ì—…ë¡œë“œ
- [x] ì—…ë¡œë“œ ì§„í–‰ë¥ (Progress bar) UI êµ¬í˜„

**ë¬¸ì„œ**: `docs/epic-1.2-completion.md`

### Epic 1.3: S3 ì—…ë¡œë“œ ì´ë²¤íŠ¸ ë° EventBridge ì—°ë™ ì„¤ì •
- [x] Terraform ì½”ë“œì— S3 ë²„í‚· ì´ë²¤íŠ¸ ì•Œë¦¼ ì„¤ì • ì¶”ê°€
- [x] EventBridge ê·œì¹™ ìƒì„± (S3 PutObject ì´ë²¤íŠ¸ ê°ì§€)
- [x] (ìž„ì‹œ) ì´ë²¤íŠ¸ ë°œìƒ ì‹œ CloudWatch Logsë¡œ ë¡œê·¸ê°€ ìž˜ ì°ížˆëŠ”ì§€ ì—°ë™ í…ŒìŠ¤íŠ¸

**ë¬¸ì„œ**: `docs/epic-1.3-completion.md`

## ðŸŽ‰ Epic 1 ì™„ë£Œ!

**ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ê°œíŽ¸ (S3 ì—°ë™)**ì´ ëª¨ë‘ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

### ë‹¬ì„±í•œ ëª©í‘œ:
1. âœ… í´ë¼ì´ì–¸íŠ¸ê°€ ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ë°±ì—”ë“œ ë¶€í•˜ ì—†ì´ S3ì— ì§ì ‘ ì—…ë¡œë“œ
2. âœ… ë³´ì•ˆì„± ë†’ì€ Presigned URL ë°©ì‹ ì‚¬ìš© (15ë¶„ ë§Œë£Œ)
3. âœ… ì‚¬ìš©ìž ì¹œí™”ì ì¸ ë“œëž˜ê·¸ ì•¤ ë“œë¡­ UI ì œê³µ
4. âœ… S3 ì´ë²¤íŠ¸ ê¸°ë°˜ ìžë™ íŠ¸ë¦¬ê±° ì¸í”„ë¼ êµ¬ì¶•

## ðŸ”„ ë‹¤ìŒ ìž‘ì—… (Epic 2)

### Epic 2.1: Audio Analyzer ì»¨í…Œì´ë„ˆ (FastAPI) ê°œë°œ
- [ ] Python FastAPI ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì„¸íŒ…
- [ ] ffmpeg-pythonì„ ì´ìš©í•œ S3 ì˜ìƒ ë‚´ ì˜¤ë””ì˜¤ ì¶”ì¶œ ë¡œì§ êµ¬í˜„
- [ ] (ìž„ì‹œ) ë”ë¯¸ ëª¨ë¸ í™•ë¥  ë°˜í™˜ ë¡œì§ ë˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ì˜¤ë””ì˜¤ íƒì§€ ëª¨ë¸ ì—°ê²°
- [ ] Dockerfile ìž‘ì„± ë° ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸

### Epic 2.2: Video Analyzer ì»¨í…Œì´ë„ˆ (FastAPI) ê°œë°œ
- [ ] Python FastAPI ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì„¸íŒ…
- [ ] S3 ë¹„ë””ì˜¤ í”„ë ˆìž„ ì¶”ì¶œ ë¡œì§ êµ¬í˜„
- [ ] (ìž„ì‹œ) ë”ë¯¸ ë¹„ì „ ëª¨ë¸ ì—°ë™ ë˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ ê¸°ë°˜ ëª¨ë¸ ì¶”ë¡ ë¶€ ì—°ê²°
- [ ] Dockerfile ìž‘ì„± ë° ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸

### Epic 2.3: Terraform EKS Spot ì¸ìŠ¤í„´ìŠ¤ ë…¸ë“œ ê·¸ë£¹ êµ¬ì„±
- [ ] terraform/eks.tf ìˆ˜ì •í•˜ì—¬ ML ì „ìš© Managed Node Group ì¶”ê°€
- [ ] í•´ë‹¹ Node Groupì„ Spot Instanceë¡œ ì„¤ì •
- [ ] ML ì›Œí¬ë¡œë“œë§Œ ì´ ë…¸ë“œ ê·¸ë£¹ì— ëœ¨ë„ë¡ Taint/Toleration ì„¤ì •

### Epic 2.4: KEDA ë„ìž… ë° Scale-to-Zero ì„¤ì •
- [ ] Terraform/Helmì„ í†µí•´ EKSì— KEDA ì„¤ì¹˜
- [ ] Audio/Video Analyzer Podì— ëŒ€í•œ ScaledObject ë§¤ë‹ˆíŽ˜ìŠ¤íŠ¸ ìž‘ì„±
- [ ] íŠ¸ëž˜í”½ì´ ì—†ì„ ë•Œ Podê°€ 0ê°œë¡œ Scale-down ë˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸

### ì‚¬ì „ ì¤€ë¹„
1. AWS ìžê²© ì¦ëª… ì„¤ì • (`.env.aws` ë˜ëŠ” AWS CLI)
2. S3 ë²„í‚· ìƒì„±: `silver-guardian-uploads`
3. ë°±ì—”ë“œ ì‹¤í–‰
4. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### 1. ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸
```bash
cd backend
go run cmd/server/main.go
```

ë‹¤ë¥¸ í„°ë¯¸ë„ì—ì„œ:
```bash
grpcurl -plaintext -d '{
  "filename": "test.mp4",
  "content_type": "video/mp4",
  "file_size": 5242880,
  "user_id": "test-user"
}' localhost:50051 analysis.AnalysisService/GetUploadURL
```

ì˜ˆìƒ ì‘ë‹µ:
```json
{
  "uploadUrl": "https://silver-guardian-uploads.s3.ap-northeast-2.amazonaws.com/...",
  "s3Key": "uploads/test-user/uuid/test.mp4",
  "expiresIn": 900,
  "uploadId": "uuid-string"
}
```

#### 2. í”„ë¡ íŠ¸ì—”ë“œ UI í…ŒìŠ¤íŠ¸
```bash
cd frontend
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:5173` ì ‘ì†:
1. "íŒŒì¼ ì—…ë¡œë“œ" íƒ­ í´ë¦­
2. ë™ì˜ìƒ íŒŒì¼ ë“œëž˜ê·¸ ì•¤ ë“œë¡­
3. "ì—…ë¡œë“œ ì‹œìž‘" ë²„íŠ¼ í´ë¦­
4. ì§„í–‰ë¥  ë°” í™•ì¸
5. ì—…ë¡œë“œ ì™„ë£Œ í™•ì¸

#### 3. S3 ì—…ë¡œë“œ í™•ì¸
```bash
aws s3 ls s3://silver-guardian-uploads/uploads/ --recursive
```

### ë¬¸ì œ í•´ê²°

#### CORS ì˜¤ë¥˜
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ S3 ì—…ë¡œë“œ ì‹œ CORS ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ S3 ë²„í‚·ì— CORS ì •ì±… ì¶”ê°€:

```json
[
  {
    "AllowedHeaders": ["*"],
    "AllowedMethods": ["PUT", "POST", "GET"],
    "AllowedOrigins": ["http://localhost:5173", "http://localhost:3000"],
    "ExposeHeaders": ["ETag"]
  }
]
```

#### gRPC ì—°ê²° ì˜¤ë¥˜
- ë°±ì—”ë“œê°€ 8080 í¬íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
- `frontend/.env`ì— `VITE_GRPC_URL=http://localhost:8080` ì„¤ì • í™•ì¸

## ðŸ“Š ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ëž¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚         â”‚   Backend   â”‚         â”‚   AWS S3    â”‚
â”‚  (React)    â”‚         â”‚   (Go)      â”‚         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚                       â”‚
       â”‚ 1. GetUploadURL       â”‚                       â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
       â”‚                       â”‚                       â”‚
       â”‚ 2. Presigned URL      â”‚                       â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
       â”‚                       â”‚                       â”‚
       â”‚ 3. PUT (file)                                 â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                       â”‚                       â”‚
       â”‚ 4. Upload Progress    â”‚                       â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚                       â”‚                       â”‚
       â”‚ 5. Success            â”‚                       â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

## ðŸŽ¯ Epic 1 ëª©í‘œ

**ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ê°œíŽ¸ (S3 ì—°ë™)**ì„ í†µí•´:
- âœ… í´ë¼ì´ì–¸íŠ¸ê°€ ëŒ€ìš©ëŸ‰ íŒŒì¼ì„ ë°±ì—”ë“œ ë¶€í•˜ ì—†ì´ S3ì— ì§ì ‘ ì—…ë¡œë“œ
- âœ… ë³´ì•ˆì„± ë†’ì€ Presigned URL ë°©ì‹ ì‚¬ìš©
- âœ… ì‚¬ìš©ìž ì¹œí™”ì ì¸ ë“œëž˜ê·¸ ì•¤ ë“œë¡­ UI ì œê³µ
- ðŸ”„ S3 ì´ë²¤íŠ¸ ê¸°ë°˜ ìžë™ ë¶„ì„ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• (ì§„í–‰ ì¤‘)
